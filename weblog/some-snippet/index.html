<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="robots" content="all" />
<title>学用代码片段</title>
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" type="text/css" href="/css/ie.css" />
<![endif]-->
</head>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-741276-12']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
})();
</script>
<body>

	<div class="container group">
		
  <div class="primary">
    <header>
      <h1>余果，腾讯ISUX前端开发设计师。
      </h1>
      <nav>
        <ul>
        <li>
            <a href="http://yuguo.us/">首页</a>
        </li>
        <li>
            <a href="http://yuguo.us/about.html">About me</a>
        </li>
        </ul>
      </nav>
    </header>

	<div class="ads">

        <h2>Categories</h2>
      <ul class="tag-box inline">
          
          


  
     
    	<li><a href="http://yuguo.us/categories.html#服务器-ref">
    		<span class="cat-name">服务器</span> <span class="cat-number">3</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#水-ref">
    		<span class="cat-name">水</span> <span class="cat-number">21</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#引用-ref">
    		<span class="cat-name">引用</span> <span class="cat-number">3</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#周记-ref">
    		<span class="cat-name">周记</span> <span class="cat-number">34</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#做需求-ref">
    		<span class="cat-name">做需求</span> <span class="cat-number">31</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#产品-ref">
    		<span class="cat-name">产品</span> <span class="cat-number">9</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#图-ref">
    		<span class="cat-name">图</span> <span class="cat-number">2</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#活动-ref">
    		<span class="cat-name">活动</span> <span class="cat-number">4</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#css-ref">
    		<span class="cat-name">css</span> <span class="cat-number">18</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#javascript-ref">
    		<span class="cat-name">javascript</span> <span class="cat-number">11</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#前端-ref">
    		<span class="cat-name">前端</span> <span class="cat-number">9</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#哲学-ref">
    		<span class="cat-name">哲学</span> <span class="cat-number">25</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#书-ref">
    		<span class="cat-name">书</span> <span class="cat-number">40</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#项目管理-ref">
    		<span class="cat-name">项目管理</span> <span class="cat-number">2</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#cms-ref">
    		<span class="cat-name">cms</span> <span class="cat-number">13</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#编程-ref">
    		<span class="cat-name">编程</span> <span class="cat-number">7</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#设计-ref">
    		<span class="cat-name">设计</span> <span class="cat-number">1</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#开源-ref">
    		<span class="cat-name">开源</span> <span class="cat-number">9</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#gtd-ref">
    		<span class="cat-name">gtd</span> <span class="cat-number">3</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#php-ref">
    		<span class="cat-name">php</span> <span class="cat-number">5</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#ios-ref">
    		<span class="cat-name">ios</span> <span class="cat-number">16</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#linux-ref">
    		<span class="cat-name">linux</span> <span class="cat-number">2</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#git-ref">
    		<span class="cat-name">git</span> <span class="cat-number">1</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#web app-ref">
    		<span class="cat-name">web app</span> <span class="cat-number">1</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#数据库-ref">
    		<span class="cat-name">数据库</span> <span class="cat-number">1</span>
    	</a></li>
     
    	<li><a href="http://yuguo.us/categories.html#nodejs-ref">
    		<span class="cat-name">nodejs</span> <span class="cat-number">2</span>
    	</a></li>
    
  


      </ul>

      <div class="fusionads">
        <h2>我的APP</h2>

        <span class="fusionentire">
          <a href="https://itunes.apple.com/cn/app/lu-da-shi-for-ying-xiong-lian/id646299086?mt=8" title="撸大师">
            <img src="/files/2013/07/appstore.png" alt="撸大师" style="width:200px;"/>
          </a>
          <span class="fusiontext">
              撸大师是一款快速查看英雄联盟攻略的iPhone APP。
          </span>
        </span>
        </div><!-- .fusionads -->
      
      <div class="fusionads">
        <h2>我的书</h2>

        <span class="fusionentire">
          <a href="http://yuguo.us/weblog/isux-and-smashing-book/" title="众妙之门3">
            <img src="http://yuguo.us/files/2013/04/sm3-cover.jpg" alt="众妙之门3"/>
          </a>
          <span class="fusiontext">
                《众妙之门3》是一本关于HTML5、CSS3、新JS API、Retina屏、Web App、基于Responsive Design的工作流……的设计书，是《Smashing Book #3 Redesign The Web》的中文译本。
          </span>
        </span>
        <p><a href="http://yuguo.us/weblog/isux-and-smashing-book/" title="众妙之门3">介绍</a> | <a href="http://product.dangdang.com/product.aspx?product_id=23212058">当当购买</a></p>
      </div><!-- .fusionads -->

      <div class="fusionads">
        <h2>我的专栏</h2>

        <span class="fusionentire">
          <a href="http://read.douban.com/column/226077/" title="谈谈全栈工程师">
            <img src="http://yuguo.us/files/2014/03/columns.jpg" alt="谈谈全栈工程师" style="margin:0; float: left; padding: 0 10px 10px 0;"/>
          </a>
          <span class="fusiontext">
                随着web服务的发展，对全栈工程师的需求渐渐增加。本专栏会从前端工程师入手，谈谈全栈工程师的历史、所需技能、未来发展方向等话题。
              <a href="http://read.douban.com/column/226077/">阅读</a>
          </span>
        </span>
        </div><!-- .fusionads -->

    </div><!-- .ads -->

  </div><!-- .primary -->

        <div class="content single-post">
	      	<h1>学用代码片段</h1>
	      	<span class="post-date">2011年 09月 01日</span>

	      	<p>之前写过一篇文章<a href="http://yuguo.us/weblog/emeditor-snippet/">《EmEditor代码片段插件介绍》</a>，现在项目越来越多，越来越大，不再用EmEditor，而用IntelliJ IDEA。这个IDE能管理项目，而且也有类似的代码片段功能——Live Template。本文主要就是关于Live Template（模版）。</p>

<h3>自定义变量</h3>


<p>Live Template最核心的思想是通过一个字段（Abbreviation）来展开一个模版（Template），这样我们输入很少字符的字段，就能输出很多字符的模版，从而节省时间和精力。</p>

<p>模版中包含纯文本和变量。变量是两个美元符号$中间包含字符，比如$&lt;variable name&gt;$这样的格式。</p>

<p>举个例子，在设定字体大小的时候，往往需要同时设置px和rem两种单位，为了节省时间，我就创建了这个叫做fs的模版。</p>

<p>在IDEA中Ctrl+Alt+S打开设置，然后搜索Live Template，之后我们会看见很多group，比如html、css、zen css等，我这个模版是在css中触发，所以我在css group里新建一个模版。Group只是用来管理Live Template，跟在什么环境下触发没关系，还可以自己建一些group比如“项目”
<a href="http://yuguo.us/files/2011/08/live_template_1.png"><img class="aligncenter size-full wp-image-888" title="live_template_1" src="http://yuguo.us/files/2011/08/live_template_1.png" alt=""   /></a>
css group里新建一个fs模版</p>

<p>我设定的缩写是fs，属于css这个Group，描述是css中的font-size这个属性。</p>

<p>Template text中的文本我写的是</p>

<pre>font-size:$v1$px;font-size:$v2$rem;</pre>


<p>展开快捷键是默认的（Tab），最后只有在CSS上下文（注意，是CSS上下文，不是CSS文件，这样在HTML中的&lt;style&gt;里也是能展开这个Template的）中输入：fs（Tab）之后，就会出现下面的截图：
<a href="http://yuguo.us/files/2011/08/live_template_2.png"><img class="aligncenter size-full wp-image-889" title="live_template_2" src="http://yuguo.us/files/2011/08/live_template_2.png" alt=""   /></a>
我随便设置了两个变量$v1$和$v2$，只是作为用户输入的一个placeholder，也可以是任何其他值。除了两个预设变量。</p>

<h3>预设变量</h3>


<p>IDEA自带两个变量，用户无法修改，一个是$SELECTION$。</p>

<p>$SELECTION$被用于“环绕模版”中，所谓环绕模版，就是当模版被展开的时候，被选择的文字会包含在模版之中。比如我创建一个模版如下：</p>

<p>这时候有两种方法来展开模版，方法一是通过缩写+指定快捷键，方法二是Ctrl+Alt+T，然后选择对应的模版，这个时候所有的包含了$SELECTION$的。</p>

<p>另一个预设变量是$END$，它表示模版结束的地方。</p>

<h3>Expression</h3>


<p>在编辑模板的对话框中点击Edit varibles按钮的时候，会出现一个对话框，其中可以编辑每一个变量的Expression。
<a href="http://yuguo.us/files/2011/08/edit_varibles.png"><img class="aligncenter size-full wp-image-893" title="edit_varibles" src="http://yuguo.us/files/2011/08/edit_varibles.png" alt=""   /></a>
Express中可以有3种值：</p>

<ul>
    <li>预设的函数，可能有参数，也可能没参数。Predefined functions with possible arguments.</li>
    <li>双引号包围的字符串常量。String constants in double quotes.</li>
    <li>其他变量的名字。The name of another variable defined in a live template.</li></ul>


<p>预设的函数有一些会很有用，比如用time()输出当前的时间。</p>

<h3>例子</h3>


<p>以下是我用代码片段来给项目带来快捷的一些例子。从这些例子中主要可以看出使用代码片段的几个优势：</p>

<ol>
    <li>一致性</li>
    <li>便捷性</li>
    <li>规范性</li></ol>


<h4>html</h4>


<p>/[tab]——【说明】HTML注释</p>

<pre>&lt;!-- $END$ --&gt;</pre>


<p>a[tab]</p>

<pre>&lt;a href="##" title="$text$"&gt;$text$&lt;/a&gt;$END$</pre>


<p>ai[tab]</p>

<pre>&lt;a href="##" title="$title$"&gt;&lt;img src="pic/sample.jpg" alt="$title$" /&gt;&lt;/a&gt;</pre>


<p>b[tab]</p>

<pre>&lt;b class="btn_$value$"&gt;&lt;/b&gt;</pre>


<p>div[tab]——【说明】div基本上都是有class的</p>

<pre>&lt;div class="$end$"&gt;

&lt;/div&gt;</pre>


<p>dl[tab]——【说明】节省输入</p>

<pre>&lt;dl&gt;

    &lt;dt&gt;&lt;/dt&gt;

    &lt;dd&gt;&lt;/dd&gt;

    &lt;dt&gt;&lt;/dt&gt;

    &lt;dd&gt;&lt;/dd&gt;

&lt;/dl&gt;</pre>


<p>i[tab]——【说明】项目中约定用i标签做图标</p>

<pre>&lt;i class="ico_$end$"&gt;&lt;/i&gt;</pre>


<p>img[tab]——【说明】避免忘记alt文字</p>

<pre>&lt;img src="http://placehold.it/70x53" alt="$alt$" /&gt;$END$</pre>


<p>jquery[tab]——【说明】在项目中经常需要做一些简单的动态演示，给前台开发使用，简单 演示我就用jquery来做</p>

<pre>&lt;!-- 前端演示脚本 开始 --&gt;

&lt;script src="http://qzonestyle.gtimg.cn/qzone_v6/html/api/js/jq.js" type="text/javascript"&gt;&lt;/script&gt;

&lt;script type="text/javascript"&gt;

&lt;/script&gt;

&lt;!-- 前端演示脚本 结束 --&gt;</pre>


<p>la[tab]——【说明】list里面包含一个a，这是常用的一种结构</p>

<pre>&lt;li&gt;&lt;a href="#"&gt;$text$&lt;/a&gt;&lt;/li&gt;$END$</pre>


<h4>CSS</h4>


<p>CSS的代码片段更多的是为了浏览器兼容而设置。</p>

<p>/[tab]——【说明】简单注释</p>

<pre>/* $VALUE$ */$END$</pre>


<p>//[tab]——【说明】复杂注释，用来分页</p>

<pre>/* ====  page: $start$ ==== */</pre>


<p>db/di/dn[tab]</p>

<pre>display:block;display:inline;display:none;</pre>


<p>ib[tab]——【说明】跨浏览器的inline-block</p>

<pre>display:inline-block;*display:inline;zoom:1;</pre>


<p>radius[tab]——【说明】可以通过一个变量，一次输出数值</p>

<pre>-moz-border-radius: $num$px; -webkit-border-radius: $num$px; border-radius: $num$px;</pre>


<p>fs[tab]——【说明】设置正文的文字大小的时候，除了用px单位，最好还用<a href="http://rebuildpattern.com/node/151">rem</a>单位来设置</p>

<pre>font-size:$v1$px;font-size:$v2$rem;</pre>


<p>lo[tab]——【说明】通过line-height和overflowhidden的方法来隐藏文字</p>

<pre>line-height:900px;overflow:hidden;font-size:0;</pre>


<p>opacy[tab]——【说明】<a href="http://rebuildpattern.com/node/104">参考资料</a><pre>filter:alpha(opacity=$n$0);-moz-opacity:0.$n$;-khtml-opacity: 0.$n$;opacity: 0.$n$;</pre>
nowrap——【说明】<a href="http://rebuildpattern.com/node/106">不换行</a><pre>white-space:nowrap;width:100%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;word-wrap:normal</pre><h3>总结</h3>
更多的代码片段我没有列出来，每个人需求不同，如果每次在完成某个任务、获得某种灵感的时候，把完成细节用代码片段总结出来，一定能越来越快越来越好。有的时候不知道如何把握代码片段复杂度，以下原则作为参考：</p>

<ol>
    <li>很多情况下，冗余的代码就是健壮的代码。它是能够最大化容忍外部因素的不确定性的一种模式。</li>
    <li>代码片段应该保持较小的粒度。拿建筑学做比喻，代码片段是砖和三合板，而不是细小的沙子，也不是成型的小房子。</li></ol>


	      	<p class='previous-next-nav'><a href="/weblog/my-little-airport/" class="next">中国是个大商场 &rarr;</a>
	      	<a href="/weblog/custom-wordpress-pagenav/" class="previous">&larr; 自定义wordpress翻页</a>
	      	</p>
	      	
	      	
			    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'yuguo'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
        </div>

	</div>

	<p class="copyright">&copy; 2009&#8201;&ndash;&#8201;2014 Yuguo. Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> and host by <a href="https://github.com/yuguo">Github</a>。
</p>

</body>
</html>